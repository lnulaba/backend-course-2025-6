{
    "info": {
        "name": "Inventory Service API",
        "description": "API for inventory management system",
        "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
    },
    "item": [
        {
            "name": "Register New Item",
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test(\"Status code is 201\", function () {",
                            "    pm.response.to.have.status(201);",
                            "});",
                            "",
                            "pm.test(\"Response has required fields\", function () {",
                            "    var jsonData = pm.response.json();",
                            "    pm.expect(jsonData).to.have.property('id');",
                            "    pm.expect(jsonData).to.have.property('inventory_name');",
                            "    pm.expect(jsonData).to.have.property('description');",
                            "});",
                            "",
                            "if (pm.response.code === 201) {",
                            "    var responseJson = pm.response.json();",
                            "    pm.globals.set(\"item_id\", responseJson.id);",
                            "}"
                        ],
                        "type": "text/javascript"
                    }
                }
            ],
            "request": {
                "method": "POST",
                "header": [],
                "body": {
                    "mode": "formdata",
                    "formdata": [
                        {
                            "key": "inventory_name",
                            "value": "Test Laptop",
                            "type": "text"
                        },
                        {
                            "key": "description",
                            "value": "Dell XPS 13 laptop for development",
                            "type": "text"
                        },
                        {
                            "key": "photo",
                            "type": "file",
                            "src": []
                        }
                    ]
                },
                "url": {
                    "raw": "{{base_url}}/register",
                    "host": ["{{base_url}}"],
                    "path": ["register"]
                },
                "description": "Register a new inventory item with multipart/form-data"
            },
            "response": []
        },
        {
            "name": "Get All Items",
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test(\"Status code is 200\", function () {",
                            "    pm.response.to.have.status(200);",
                            "});",
                            "",
                            "pm.test(\"Response is an array\", function () {",
                            "    var jsonData = pm.response.json();",
                            "    pm.expect(jsonData).to.be.an('array');",
                            "});"
                        ],
                        "type": "text/javascript"
                    }
                }
            ],
            "request": {
                "method": "GET",
                "header": [],
                "url": {
                    "raw": "{{base_url}}/inventory",
                    "host": ["{{base_url}}"],
                    "path": ["inventory"]
                },
                "description": "Get list of all inventory items"
            },
            "response": []
        },
        {
            "name": "Get Item by ID",
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test(\"Status code is 200\", function () {",
                            "    pm.response.to.have.status(200);",
                            "});",
                            "",
                            "pm.test(\"Response has required fields\", function () {",
                            "    var jsonData = pm.response.json();",
                            "    pm.expect(jsonData).to.have.property('id');",
                            "    pm.expect(jsonData).to.have.property('inventory_name');",
                            "    pm.expect(jsonData).to.have.property('description');",
                            "});"
                        ],
                        "type": "text/javascript"
                    }
                }
            ],
            "request": {
                "method": "GET",
                "header": [],
                "url": {
                    "raw": "{{base_url}}/inventory/{{item_id}}",
                    "host": ["{{base_url}}"],
                    "path": ["inventory", "{{item_id}}"]
                },
                "description": "Get specific inventory item by ID"
            },
            "response": []
        },
        {
            "name": "Update Item",
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test(\"Status code is 200\", function () {",
                            "    pm.response.to.have.status(200);",
                            "});",
                            "",
                            "pm.test(\"Item was updated\", function () {",
                            "    var jsonData = pm.response.json();",
                            "    pm.expect(jsonData.inventory_name).to.eql(\"Updated Test Laptop\");",
                            "});"
                        ],
                        "type": "text/javascript"
                    }
                }
            ],
            "request": {
                "method": "PUT",
                "header": [
                    {
                        "key": "Content-Type",
                        "value": "application/json"
                    }
                ],
                "body": {
                    "mode": "raw",
                    "raw": "{\n    \"inventory_name\": \"Updated Test Laptop\",\n    \"description\": \"Updated Dell XPS 13 laptop for development\"\n}"
                },
                "url": {
                    "raw": "{{base_url}}/inventory/{{item_id}}",
                    "host": ["{{base_url}}"],
                    "path": ["inventory", "{{item_id}}"]
                },
                "description": "Update inventory item name or description"
            },
            "response": []
        },
        {
            "name": "Get Item Photo",
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test(\"Status code is 200 or 404\", function () {",
                            "    pm.expect(pm.response.code).to.be.oneOf([200, 404]);",
                            "});",
                            "",
                            "if (pm.response.code === 200) {",
                            "    pm.test(\"Content-Type is image/jpeg\", function () {",
                            "        pm.expect(pm.response.headers.get('Content-Type')).to.include('image/jpeg');",
                            "    });",
                            "}"
                        ],
                        "type": "text/javascript"
                    }
                }
            ],
            "request": {
                "method": "GET",
                "header": [],
                "url": {
                    "raw": "{{base_url}}/inventory/{{item_id}}/photo",
                    "host": ["{{base_url}}"],
                    "path": ["inventory", "{{item_id}}", "photo"]
                },
                "description": "Get photo of specific inventory item"
            },
            "response": []
        },
        {
            "name": "Update Item Photo",
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test(\"Status code is 200\", function () {",
                            "    pm.response.to.have.status(200);",
                            "});",
                            "",
                            "pm.test(\"Photo was updated\", function () {",
                            "    var jsonData = pm.response.json();",
                            "    pm.expect(jsonData).to.have.property('photo');",
                            "    pm.expect(jsonData).to.have.property('photo_url');",
                            "});"
                        ],
                        "type": "text/javascript"
                    }
                }
            ],
            "request": {
                "method": "PUT",
                "header": [],
                "body": {
                    "mode": "formdata",
                    "formdata": [
                        {
                            "key": "photo",
                            "type": "file",
                            "src": []
                        }
                    ]
                },
                "url": {
                    "raw": "{{base_url}}/inventory/{{item_id}}/photo",
                    "host": ["{{base_url}}"],
                    "path": ["inventory", "{{item_id}}", "photo"]
                },
                "description": "Update photo of specific inventory item"
            },
            "response": []
        },
        {
            "name": "Search Item",
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test(\"Status code is 200\", function () {",
                            "    pm.response.to.have.status(200);",
                            "});",
                            "",
                            "pm.test(\"Found item has required fields\", function () {",
                            "    var jsonData = pm.response.json();",
                            "    pm.expect(jsonData).to.have.property('id');",
                            "    pm.expect(jsonData).to.have.property('inventory_name');",
                            "});"
                        ],
                        "type": "text/javascript"
                    }
                }
            ],
            "request": {
                "method": "POST",
                "header": [
                    {
                        "key": "Content-Type",
                        "value": "application/x-www-form-urlencoded"
                    }
                ],
                "body": {
                    "mode": "urlencoded",
                    "urlencoded": [
                        {
                            "key": "id",
                            "value": "{{item_id}}",
                            "type": "text"
                        },
                        {
                            "key": "has_photo",
                            "value": "on",
                            "type": "text"
                        }
                    ]
                },
                "url": {
                    "raw": "{{base_url}}/search",
                    "host": ["{{base_url}}"],
                    "path": ["search"]
                },
                "description": "Search for item by ID with form data"
            },
            "response": []
        },
        {
            "name": "Register Item - Bad Request (Missing Name)",
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test(\"Status code is 400\", function () {",
                            "    pm.response.to.have.status(400);",
                            "});",
                            "",
                            "pm.test(\"Error message is present\", function () {",
                            "    var jsonData = pm.response.json();",
                            "    pm.expect(jsonData).to.have.property('error');",
                            "});"
                        ],
                        "type": "text/javascript"
                    }
                }
            ],
            "request": {
                "method": "POST",
                "header": [],
                "body": {
                    "mode": "formdata",
                    "formdata": [
                        {
                            "key": "description",
                            "value": "Item without name",
                            "type": "text"
                        }
                    ]
                },
                "url": {
                    "raw": "{{base_url}}/register",
                    "host": ["{{base_url}}"],
                    "path": ["register"]
                },
                "description": "Test bad request when inventory name is missing"
            },
            "response": []
        },
        {
            "name": "Get Non-Existent Item",
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test(\"Status code is 404\", function () {",
                            "    pm.response.to.have.status(404);",
                            "});",
                            "",
                            "pm.test(\"Error message is present\", function () {",
                            "    var jsonData = pm.response.json();",
                            "    pm.expect(jsonData).to.have.property('error');",
                            "});"
                        ],
                        "type": "text/javascript"
                    }
                }
            ],
            "request": {
                "method": "GET",
                "header": [],
                "url": {
                    "raw": "{{base_url}}/inventory/9999",
                    "host": ["{{base_url}}"],
                    "path": ["inventory", "9999"]
                },
                "description": "Test 404 response for non-existent item"
            },
            "response": []
        },
        {
            "name": "Method Not Allowed",
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test(\"Status code is 405\", function () {",
                            "    pm.response.to.have.status(405);",
                            "});",
                            "",
                            "pm.test(\"Error message is present\", function () {",
                            "    var jsonData = pm.response.json();",
                            "    pm.expect(jsonData).to.have.property('error');",
                            "});"
                        ],
                        "type": "text/javascript"
                    }
                }
            ],
            "request": {
                "method": "PATCH",
                "header": [],
                "url": {
                    "raw": "{{base_url}}/inventory",
                    "host": ["{{base_url}}"],
                    "path": ["inventory"]
                },
                "description": "Test 405 response for unsupported method"
            },
            "response": []
        },
        {
            "name": "Delete Item",
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test(\"Status code is 200\", function () {",
                            "    pm.response.to.have.status(200);",
                            "});",
                            "",
                            "pm.test(\"Success message is present\", function () {",
                            "    var jsonData = pm.response.json();",
                            "    pm.expect(jsonData).to.have.property('message');",
                            "});"
                        ],
                        "type": "text/javascript"
                    }
                }
            ],
            "request": {
                "method": "DELETE",
                "header": [],
                "url": {
                    "raw": "{{base_url}}/inventory/{{item_id}}",
                    "host": ["{{base_url}}"],
                    "path": ["inventory", "{{item_id}}"]
                },
                "description": "Delete inventory item"
            },
            "response": []
        }
    ],
    "event": [
        {
            "listen": "prerequest",
            "script": {
                "type": "text/javascript",
                "exec": [
                    ""
                ]
            }
        },
        {
            "listen": "test",
            "script": {
                "type": "text/javascript",
                "exec": [
                    ""
                ]
            }
        }
    ],
    "variable": [
        {
            "key": "base_url",
            "value": "http://localhost:3000",
            "type": "string"
        }
    ]
}
